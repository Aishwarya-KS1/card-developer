### Access Tokens



Token API is designed to generate the Access Token by performing Basic Authorization operation on consumer key and consumer secret (generated from portal apps) with grant_type value client_credentials. This access token then passed in header as Bearer type to authenticate APIs.

**Note:** you must obtain a token for the correct environment.  A Sandbox token will not work in Production. A Production token will not work in Sandbox.


[![Token](assets/images/token-button.png)](https://card-dit1-dsp.apimz.onefiserv.net:8079/tou/2637/915)


swagger: '2.0'
info:
  version: '1.0.0'
  title: "Token API"
  description: "API to generate an Access Token"
schemes:
  - "https"
securityDefinitions:
  basicAuth:
    type: "basic"
host: "card.api.fiservapps.com"
security:
  - basicAuth: []
basePath: "/cs/oauth2"
paths:
  /token:
    post:
      x-child-product-name: Token
      x-proxy-name: Token
      x-group-name: Token
      tags:
        - "token"
      consumes:
        - "application/x-www-form-urlencoded"
      produces:
        - "application/json"
      summary: "API to generate an access token."
      parameters:
        - name: "x-fapi-financial-id"
          in: "header"
          description: "Enter the client id"
          required: true
          type: "string"
          pattern: "^[0-9]*$"
          minLength: 8
          maxLength: 8
        - name: "x-fapi-interaction-id"
          in: "header"
          description: "Enter the transaction/correlation id"
          required: false
          type: "string"
          pattern: "^[^-][a-zA-Z0-9-][^-]$"
          minLength: 15
          maxLength: 40          
        - name: "code_challenge"
          description:  "REQUIRED for Mobile app clients ONLY. To be generated by client code using a code_verifier and code_challenge_method."
          in: "header"
          required: false
          type: "string"
          maxLength: 48
        - name: "code_challenge_method"
          description:  "REQUIRED for Mobile app clients ONLY. To be provided by client code."
          in: "header"
          required: false
          type: "string"
          enum:
            [
            SHA256,
            SHA512
            ]
        - name: "scope"
          in: "query"
          required: true
          type: "string"
          
        - name: "grant_type"
          in: "formData"
          required: true
          type: 'string'
      responses:
        '200':
          description: "OK"
          headers:
            x-fapi-interaction-id:
              type: "string"
              description:  "Represents a transaction ID created with each request."
          schema:
            $ref: '#/definitions/tokenResponse'
        '400':
          description: "Bad Request"
          headers:
            x-fapi-interaction-id:
              type: "string"
              description:  "Represents a transaction ID created with each request."
          schema:
            $ref: '#/definitions/ErrorResponse'
        '401':
          description: "Unauthorized"
          schema:
            $ref: '#/definitions/ErrorResponse'
        '415':
          description: "Unsupported Media Type"
          headers:
            x-fapi-interaction-id:
              type: "string"
              description:  "Represents a transaction ID created with each request."
          schema:
            $ref: '#/definitions/ErrorResponse'    
        '429':
          description: "Too Many Requests"
          headers:
            x-fapi-interaction-id:
              type: "string"
              description:  "Represents a transaction ID created with each request."
          schema:
            $ref: '#/definitions/ErrorResponse'
        '500':
          description: "Internal Server Error"
          headers:
            x-fapi-interaction-id:
              type: "string"
              description:  "Represents a transaction ID created with each request."
          schema:
            $ref: '#/definitions/ErrorResponse'
        default:
          description: "Unexpected Error"
          schema:
            $ref: '#/definitions/ErrorResponse'    
definitions:
  tokenRequest:
    type: "object"
    properties:
      grant_type:
        type: "string"
  tokenResponse:
    type: "object"
    properties:
      refresh_token_expires_in:
        type: "string"
        format: "utc-millisec"
      api_product_list:
        type: "string"
      api_product_list_json:
        type: "array"
        items:
          type: "string"
      organization_name:
        type: "string"
      token_type:
        type: "string"
      issued_at:
        type: "string"
        format: "utc-millisec"
      client_id:
        type: "string"
      access_token:
        type: "string"
      application_name:
        type: "string"
      scope:
        type: "string"
      expires_in:
        type: "string"
        format: "utc-millisec"
      refresh_count:
        type: "string"
        format: "utc-millisec"
      status:
        type: "string"
  ErrorResponse:
    type: "object"
    properties:
      errors:
        type: "array"
        items:
         $ref: "#/definitions/Error"
  Error:
    type: "object"
    properties:
      code:
        type: "string"
      description:
        type: "string"









### Access Token   **1.0.1  OAS3**

API to generate Access Token (OAuth 2.0 bearer token).

Servers:

https://card.api.fiservapps.com/cs/oauth2 - Production server (uses live data)

https://card-sandbox.api.fiservapps.com/cs/oauth2 - Sandbox server (uses test data)




[Token](https://card.developer.fiserv.com/apis/token1#/Token:~:text=Token-,POST,-/v1/token)      /v1/token API to generate an access token.

##### Parameters

|                          Name                                |   Description                                                                                                                                                                                                                                                                                                                                     |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **scope** **required*<br>(query)                 |   Required. Specifies the access available to the client application after it is authenticated.   <br>Example : /cs/api   /cs/api                                                                                                                                                                                                                                     |
|   **accept**           <br>(header)                 |   Identifies the media format that clients accepts.                                                                                                                                                                                                                                                                                                               |
|   **content-type** **required*<br>(header)         |   Required. Identifies the type of the payload (for POST and PUT operations) that the client is sending. It should be the same as what the server is expecting.                                                                                                                                                                                                   |
|   **authorization** **required*<br>(header)        |   Required. Authenticates the user and the system. Enter the app Key:Secret, separated by a colon, encoded in Base64 format. Format basic [Base64 encoded (Key:Secret)] Find the API Key and API Secret from your Developer App (Keys tab) in the Card Developer Portal. The keys are app-specific and can have subscription to one or more Fiserv API products.  |
|   **x-fapi-financial-id** **required*<br>(header)  |   8 digit unique financial institute id assigned to each FI by Fiserv. If your application is serving multiple clients then x-fapi-financial-id signifies the financial institute id of FI your application is sending request for.                                                                                                                               |
|   **x-fapi-interaction-id**<br>(header)  |   Optional. Represents a transaction identification (transaction ID) value for tracking purposes. This field is optional in the request but always returned in the response. If a value is provided in the request, the same will be sent back in the response. Otherwise, a Fiserv-generated ID is added to the response.                                        |
|   **request** **required*<br>object       <br>(body)           |   Example Value   		Schema  <br>``` {```<br>```     "grant_type": "client_credentials"```<br>```  } ```  <br>Parameter content type   <br>application/x-www-form-urlencoded                                                                                                                                                                                                                              |

#### Responses

![carefully-crafted Markdown table](assets/images/responses-access-token.png)
